<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>宣传品（资料）制作查询</title>
    <script src="assets/js/jquery-3.2.1.js"></script>
    <script src="assets/bootstrap/js/bootstrap.js"></script>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="assets/ownCss/view.css">
</head>
<body>
<div class="container">
    <!--导航栏-->
    <nav class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1"><span
                    class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span
                    class="icon-bar"></span><span class="icon-bar"></span></button>
            <a class="navbar-brand" href="#">
                <img alt="Brand" style="max-width:40px;margin-top:-10px;" src="picture/nav_fish.svg">
            </a>
            <a class="navbar-brand" href="home.html">宣传管理</a>
        </div>
        <!--下拉菜单-->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <!--宣传信息发布-->
                <li class="dropdown ">
                    <a href="#" class="dropdown-toggle " data-toggle="dropdown">宣传信息发布<strong
                            class="caret"></strong></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="xcxxfbsq.html">宣传信息发布申请 </a>
                        </li>
                        <li class="divider">
                        </li>
                        <li>
                            <a href="xcxxfbcx.html">宣传信息发布查询 </a>
                        </li>
                        <li class="divider">
                        </li>
                        <li>
                            <a href="xcxxlbgl.html">宣传信息发布管理 </a>
                        </li>
                        <li class="divider">
                        <li>
                            <a href="xcxxfbtj.html">宣传信息发布统计 </a>
                        </li>
                    </ul>
                </li>
                <!--宣传品(资料)制作-->
                <li class="dropdown ">
                    <a href="#" class="dropdown-toggle " data-toggle="dropdown">宣传品(资料)制作<strong
                            class="caret"></strong></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="xcpzzsq.html">宣传品(资料)制作申请 </a>
                        </li>
                        <li class="divider">
                        </li>
                        <li>
                            <a href="xcpzhzcx.html">宣传品(资料)制作查询 </a>
                        </li>
                        <li class="divider">
                        </li>
                        <li>
                            <a href="xcpzhiztj.html">宣传品(资料)制作统计 </a>
                        </li>
                    </ul>
                </li>
                <!--宣传物资领用-->
                <li class="dropdown ">
                    <a href="#" class="dropdown-toggle " data-toggle="dropdown">宣传物资领用<strong
                            class="caret"></strong></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="xcwzlysq.html">宣传物资领用申请 </a>
                        </li>
                        <li class="divider">
                        </li>
                        <li>
                            <a href="xcwzlycx.html">宣传物资领用查询 </a>
                        </li>
                        <li class="divider">
                        </li>
                        <li>
                            <a href="xcwzlytj.html">宣传物资领用统计 </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
    <!--以下是查询导航栏-->
    <nav class="navbar xcsw-navbar navbar-hei" role="navigation">
        <form class="navbar-form navbar-left">
            <div class="form-group demoadd">
                <!--两个输入框1（导航栏）-->
                <strong class="text-primary">标题：</strong>
                <input type="text" style="width: 90px" id="searchtitle">
                <strong class="text-primary">&nbsp;&nbsp;申请人：</strong>
                <input type="text" style="width: 90px">
                <!--下拉框1（导航栏）-->
                <strong class="text-primary">&nbsp;&nbsp;制作方式：</strong>
                <select id="zzfs">
                    <option value="">全部</option>
                    <option value="内部制作">内部制作</option>
                    <option value="广告公司制作">广告公司制作</option>
                    <option value="内部与广告公司制作">内部与广告公司制作</option>
                </select>
                <!--两个输入框2（导航栏）-->
                <strong class="text-primary">&nbsp;&nbsp;总费用：
                </strong>
                <input id="minprice" type="text" style="width: 50px">&nbsp;&nbsp;-&nbsp;
                <input id="maxprice" type="text" style="width: 50px">
                <!--下拉框2（导航栏）-->
                <strong class="text-primary">&nbsp;&nbsp;状态：</strong>
                <select id="ispass">
                    <option value="">全部</option>
                    <option value="待审批">待审批</option>
                    <option value="通过">通过</option>
                    <option value="不通过">不通过</option>
                </select>
                &nbsp;&nbsp;
                <!--两个按钮（导航栏）-->
                <a href="javascript:;" id="btn-search"><i class="glyphicon glyphicon-search"></i>&nbsp;查询</a>
                &nbsp;
                <a href="javascript:;" id="reset"><i class="glyphicon glyphicon-refresh"></i>&nbsp;重置</a>
            </div>
        </form>
    </nav>

    <!--三个按钮-->
    <div class="demo">
        <a href="xcpzzsq.html"><i class="glyphicon glyphicon-plus" style="color: limegreen"></i>新建</a>
        <a href="javascript:;"><i class="glyphicon glyphicon-ok" style="color: limegreen"></i>&nbsp;归档</a>
        <a href="javascript:;" id="delete"><i class="glyphicon glyphicon-remove" style="color: red"></i>&nbsp;删除</a>
    </div>

    <!--表格-->
    <table class="table table-bordered">
        <thead>
        <tr class="xcsw-navbar">
            <th><input type="checkbox" onclick="allCheck()"></th>
            <th class="text-info">No.</th>
            <th class="text-info">标题</th>
            <th class="text-info">制作方式</th>
            <th class="text-info">总费用</th>
            <th class="text-info">申请人</th>
            <th class="text-info">完成人</th>
            <th class="text-info">状态</th>
        </tr>
        </thead>
        <tbody id="list">
        </tbody>
    </table>

    <!--分页-->
    <nav style="text-align: center">
        <ul class="pagination">
            <li><a href="#">&laquo;</a></li>
            <li><a href="#">1</a></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li><a href="#">5</a></li>
            <li><a href="#">&raquo;</a></li>
        </ul>
    </nav>
</div>
<!--checkbox 全选/取消全选-->
<script type="text/javascript">
    //checkbox 全选/取消全选
    var isCheckAll = false;
    function allCheck() {
        if (isCheckAll) {
            $("input[type='checkbox']").each(function () {
                this.checked = false;
            });
            isCheckAll = false;
        } else {
            $("input[type='checkbox']").each(function () {
                this.checked = true;
            });
            isCheckAll = true;
        }
    }
</script>

<script>
    //获取所有内容
    $(function () {
        $.ajax({
            url: "xcp/all",
            success: function (data) {
                var a = 0;
                for (var i = 0; i < data.length; i++) {
                    a = a + 1;
                    if (data[i].commonAdvise == "待审批") {
                    $("#list").append(
                        "<tr id =checkbox" + data[i].id + ">" +
                        "<td>" + "<input type='checkbox' name='check' value=" + data[i].id + ">" + "</td>" +
                        "<td>" + a + "</td>" +
                        "<td>" + "<a href='ldxcpzzsq.html?xcp= " + data[i].id + " ' target='_parent'>" + data[i].title + "</a>" + "</td>" +
                        "<td>" + data[i].makestyle + "</td>" +
                        "<td>" + data[i].totalprice + "</td>" +
                        "<td>" + "张明磊" + "</td>" +
                        "<td>" + data[i].manager + "</td>" +
                        "<td>" + data[i].commonAdvise + "</td>" +
                        "</tr>"
                    );
                    }
                    else {
                        $("#list").append(
                            "<tr id =checkbox" + data[i].id + ">" +
                            "<td>" + "<input type='checkbox' name='check' value=" + data[i].id + ">" + "</td>" +
                            "<td>" + a + "</td>" +
                            "<td>" + "<a href='xcpzzsend.html?xcp= " + data[i].id + " ' target='_parent'>" + data[i].title + "</a>" + "</td>" +
                            "<td>" + data[i].makestyle + "</td>" +
                            "<td>" + data[i].totalprice + "</td>" +
                            "<td>" + "张明磊" + "</td>" +
                            "<td>" + data[i].manager + "</td>" +
                            "<td>" + data[i].commonAdvise + "</td>" +
                            "</tr>"
                        );
                    }
                }
            }
        });
    });
    //搜索按钮操作
    $("#btn-search").bind('click', function () {
        $(function () {
            $("#list").empty();
            var title = $("#searchtitle").val();
            ;
            var zzfs = $("#zzfs").val();
            var minprice = $("#minprice").val();
            var maxprice = $("#maxprice").val();
            var ispass = $("#ispass").val();
            $.ajax({
                url: "xcp/title",
                data: {"title": title, "makestyle": zzfs,"commonAdvise":ispass},
                success: function (data) {
                    var a = 0;
                    $("#list").empty();
                    for (var i = 0; i < data.length; i++) {
                        a = a + 1;
                        if (data[i].commonAdvise == "待审批") {
                            $("#list").append(
                                "<tr id =checkbox" + data[i].id + ">" +
                                "<td>" + "<input type='checkbox' name='check' value=" + data[i].id + ">" + "</td>" +
                                "<td>" + a + "</td>" +
                                "<td>" + "<a href='ldxcpzzsq.html?xcp= " + data[i].id + " ' target='_parent'>" + data[i].title + "</a>" + "</td>" +
                                "<td>" + data[i].makestyle + "</td>" +
                                "<td>" + data[i].totalprice + "</td>" +
                                "<td>" + "张明磊" + "</td>" +
                                "<td>" + data[i].manager + "</td>" +
                                "<td>" + data[i].commonAdvise + "</td>" +
                                "</tr>"
                            );
                        }
                        else {
                            $("#list").append(
                                "<tr id =checkbox" + data[i].id + ">" +
                                "<td>" + "<input type='checkbox' name='check' value=" + data[i].id + ">" + "</td>" +
                                "<td>" + a + "</td>" +
                                "<td>" + "<a href='xcpzzsend.html?xcp= " + data[i].id + " ' target='_parent'>" + data[i].title + "</a>" + "</td>" +
                                "<td>" + data[i].makestyle + "</td>" +
                                "<td>" + data[i].totalprice + "</td>" +
                                "<td>" + "张明磊" + "</td>" +
                                "<td>" + data[i].manager + "</td>" +
                                "<td>" + data[i].commonAdvise + "</td>" +
                                "</tr>"
                            );
                        }
                    }
                }
            });
        });
    });
    //重置按钮操作
    $("#reset").bind('click', function () {
        $("#list").empty();
        $(function () {
            $.ajax({
                url: "xcp/all",
                success: function (data) {
                    var a = 0;
                    for (var i = 0; i < data.length; i++) {
                        a = a + 1;
                        if (data[i].commonAdvise == "待审批") {
                            $("#list").append(
                                "<tr id =checkbox" + data[i].id + ">" +
                                "<td>" + "<input type='checkbox' name='check' value=" + data[i].id + ">" + "</td>" +
                                "<td>" + a + "</td>" +
                                "<td>" + "<a href='ldxcpzzsq.html?xcp= " + data[i].id + " ' target='_parent'>" + data[i].title + "</a>" + "</td>" +
                                "<td>" + data[i].makestyle + "</td>" +
                                "<td>" + data[i].totalprice + "</td>" +
                                "<td>" + "张明磊" + "</td>" +
                                "<td>" + data[i].manager + "</td>" +
                                "<td>" + data[i].commonAdvise + "</td>" +
                                "</tr>"
                            );
                        }
                        else {
                            $("#list").append(
                                "<tr id =checkbox" + data[i].id + ">" +
                                "<td>" + "<input type='checkbox' name='check' value=" + data[i].id + ">" + "</td>" +
                                "<td>" + a + "</td>" +
                                "<td>" + "<a href='xcpzzsend.html?xcp= " + data[i].id + " ' target='_parent'>" + data[i].title + "</a>" + "</td>" +
                                "<td>" + data[i].makestyle + "</td>" +
                                "<td>" + data[i].totalprice + "</td>" +
                                "<td>" + "张明磊" + "</td>" +
                                "<td>" + data[i].manager + "</td>" +
                                "<td>" + data[i].commonAdvise + "</td>" +
                                "</tr>"
                            );
                        }
                    }
                }
            });
        });
    });
    //删除按钮操作
    $("#delete").bind('click', function () {
        var groupCheckbox = $("input[name='check']");
        for (i = 0; i < groupCheckbox.length; i++) {
            if (groupCheckbox[i].checked) {
                var val = groupCheckbox[i].value;
//                alert(val );
                deletebyid(val)
            }
        }

        function deletebyid(id) {
            $.ajax({
                url: "/xcp/" + id,
                type: 'Delete',
                dataType: 'JSON',
                success: function (data) {
//                    alert('删除成功！');
                    parent.location.reload();
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert('删除失败');
                }
            });
        }

    });
</script>
</body>
</html>